<!DOCTYPE html>
<html>
<head>
  <title>Google Drive API Example</title>
  <script src="https://apis.google.com/js/api.js"></script>
  <script>
    var filesList = document.getElementById('files-list');

    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
        clientId: '131979807256-s94vium5cvpklf1eiqbqtalmg98t672g.apps.googleusercontent.com',
        discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],
        scope: https://drive.google.com/drive/folders/1P9C8pVIsrcD0k8ygR05sbJpOjP5EeURJ?usp=drive_link', // Use the appropriate scope based on your needs
      }).then(function() {
        // Handle the authentication flow.
        // You can check if the user is signed in using `gapi.auth2.getAuthInstance().isSignedIn.get()`
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (isSignedIn) {
        // User is signed in, perform the necessary actions.
        listFiles();
      } else {
        // User is signed out, perform the necessary actions.
      }
    }

    function handleSignInClick() {
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignOutClick() {
      gapi.auth2.getAuthInstance().signOut();
    }

    function listFiles() {
      gapi.client.drive.files.list({
        pageSize: 10,
        fields: 'nextPageToken, files(id, name)',
      }).then(function(response) {
        var files = response.result.files;
        if (files && files.length > 0) {
          filesList.innerHTML = '<h2>Files:</h2>';
          for (var i = 0; i < files.length; i++) {
            var file = files[i];
            filesList.innerHTML += '<p>' + file.name + ' (' + file.id + ')</p>';
          }
        } else {
          filesList.innerHTML = '<p>No files found.</p>';
        }
      });
    }
  </script>
</head>
<body>
  <h1>Google Drive API Example</h1>
  <button id="signin-button" onclick="handleSignInClick()">Sign In</button>
  <button id="signout-button" onclick="handleSignOutClick()">Sign Out</button>
  <div id="files-list"></div>

  <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
</body>
</html>
